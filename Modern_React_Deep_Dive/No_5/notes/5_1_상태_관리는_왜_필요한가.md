# ìƒíƒœ ê´€ë¦¬ëŠ” ì™œ í•„ìš”í•œê°€?

## ë¦¬ì•¡íŠ¸ ìƒíƒœ ê´€ë¦¬ì˜ ì—­ì‚¬
### ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ ìƒíƒœ(State)
- ì–´ë– í•œ ì˜ë¯¸ë¥¼ ì§€ë‹Œ ê°’ì´ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ì§€ì†ì ìœ¼ë¡œ ë³€ê²½ë  ìˆ˜ ìˆëŠ” ê°’
- ìƒí˜¸ì‘ìš©ì´ ê°€ëŠ¥í•œ ëª¨ë“  ìš”ì†Œì˜ í˜„ì¬ ê°’
> ìƒíƒœ ê°’ ë¶„ë¥˜
- UI: ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ, ë¼ë””ì˜¤ë¥¼ ë¹„ë¡¯í•œ ê°ì¢… input, ì•Œë¦¼ì°½ì˜ ë…¸ì¶œ ì—¬ë¶€ ë“±
- URL: ë¸Œë¼ìš°ì €ì—ì„œ ê´€ë¦¬ë˜ê³  ìˆëŠ” ìƒíƒœ ê°’, `https://www.airbnb.co.kr/rooms/34113796?adults=2` ì—ì„œ `roomId=34113796`ê³¼ `adults=2`ë¼ê³ í•˜ëŠ” ìƒíƒœê°€ ì¡´ì¬, ì´ëŠ” ì‚¬ìš©ìì˜ ë¼ìš°íŒ…ì— ë”°ë¼ ë³€ê²½
- í¼(form): ë¡œë”© ì¤‘, ì œì¶œ, ì ‘ê·¼ ë¶ˆê°€ëŠ¥, ê°’ì˜ ìœ íš¨ ë“±
- ì„œë²„ì—ì„œ ê°€ì ¸ì˜¨ ê°’: í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ì„ í†µí•´ ê°€ì ¸ì˜¨ ê°’(API ìš”ì²­ ë“±)

### ë¦¬ì•¡íŠ¸ ìƒíƒœ ê´€ë¦¬ì˜ ì—­ì‚¬
- í”„ë ˆì„ì›Œí¬ê°€ ì•„ë‹Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ ë¦¬ì•¡íŠ¸ëŠ” ë‹¨ìˆœíˆ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ìœ„í•¨ì¼ ë¿ì´ê³  ê·¸ ì´ìƒì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•ŠìŒ.(ê°œë°œì, ì‹œê°„ì— ë”°ë¼ ìƒíƒœ ê´€ë¦¬ì— ë§ì€ ì°¨ì´ê°€ ìˆìŒ)

> Flux íŒ¨í„´ì˜ ë“±ì¥
- ë°°ê²½
    - ì „ì—­ ìƒíƒœê´€ë¦¬ë¥¼ í•˜ë˜ê±´ Context API(16.3ë²„ì „) ì´í›„ useContext(16.8ë²„ì „) ê·¸ ì „ê¹Œì§€ëŠ”(ë¦¬ë•ìŠ¤ê°€ ë‚˜íƒ€ë‚˜ê¸° ì „ê¹Œì§€) ë”±íˆ ì´ë¦„ì„ ì•Œë¦° ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì—†ìŒ
- 2014ë…„
    - **Flux ë“±ì¥** : ìƒíƒœì™€ ê·¸ ìƒíƒœì˜ ë³€ê²½ì— ëŒ€í•œ íë¦„ê³¼ ë°©ì‹ì„ ë‹¨ë°©í–¥ìœ¼ë¡œ ì±„íƒ
    - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¹„ëŒ€í•´ì§€ê³  ìƒíƒœ(ë°ì´í„°)ë„ ë§ì•„ì§ì— ë”°ë¼ ìƒíƒœì˜ ë³€í™” ì¶”ì ê³¼ ì´í•´ê°€ ì–´ë ¤ì›Œì¡ŒìŒ
    ![ê¸°ì¡´ MVC íŒ¨í„´](../source/images/MVC.png)
    - í˜ì´ìŠ¤ë¶ íŒ€: ì–‘ë°©í–¥ ë°ì´í„° ë°”ì¸ë”©ì˜ ë¬¸ì œì  ì–¸ê¸‰ ğŸ‘‰ ë‹¨ë°©í–¥ ë°ì´í„° ë°”ì¸ë”© ì œì•ˆ(**Flux íŒ¨í„´ì˜ ì‹œì‘**)
    ![Flux íŒ¨í„´ì˜ ê¸°ë³¸ì ì¸ ë‹¨ë°©í–¥ ë°ì´í„° íë¦„](../source/images/Flux.png)
- Flux íŒ¨í„´ í†ºì•„ë³´ê¸°
    - ì•¡ì…˜(`action`): ì–´ë– í•œ ì‘ì—…ì„ ì²˜ë¦¬í•  ì•¡ì…˜ê³¼ ê·¸ ì•¡ì…˜ ë°œìƒ ì‹œ í•¨ê»˜ í¬í•¨ì‹œí‚¬ ë°ì´í„°ë¥¼ ì˜ë¯¸, ì•¡ì…˜ íƒ€ì…ê³¼ ë°ì´í„°ë¥¼ ê°ê° ì •ì˜í•´ ì´ë¥¼ ë””ìŠ¤íŒ¨ì²˜ë¡œ ë³´ëƒ„
    - ë””ìŠ¤íŒ¨ì²˜(`dispatcher`): ì•¡ì…˜ì„ ìŠ¤í† ì–´ì— ë³´ë‚´ëŠ” ì—­í• , ì½œë°± í•¨ìˆ˜ í˜•íƒœë¡œ ì•ì„œ ì•¡ì…˜ì´ ì •ì˜í•œ íƒ€ì…ê³¼ ë°ì´í„°ë¥¼ ëª¨ë‘ ìŠ¤í† ì–´ì— ì „ì†¡
    - ìŠ¤í† ì–´(`store`): ì‹¤ì œ ìƒ…ì• ì— ë”°ë¥¸ ê°’ê³¼ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆìŒ, ì•¡ì…˜ì˜ íƒ€ì…ì— ë”°ë¼ ì–´ë–»ê²Œ ë³€ê²½í• ì§€ê°€ ì •ì˜ë¼ ìˆìŒ
    - ë·°(`view`): ë¦¬ì•¡íŠ¸ì˜ ì»´í¬ë„ŒíŠ¸ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ, ìŠ¤í† ì–´ì—ì„œ ë§Œë“¤ì–´ì§„ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ í™”ë©´ì„ ë Œë”ë§í•˜ëŠ” ì—­í• . ë˜í•œ ë·°ì—ì„œë„ ì‚¬ìš©ìì˜ ì…ë ¥ì´ë‚˜ í–‰ìœ„ì— ë”°ë¼ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ ì í•  ìˆ˜ ìˆëŠ”ë°, ì´ ê²½ìš° ë‹¤ìŒ ê·¸ë¦¼ì²˜ëŸ¼ ë·°ì—ì„œ ì•¡ì…˜ì„ í˜¸ì¶œí•˜ëŠ” êµ¬ì¡°ë¡œ êµ¬ì„±
    ![ë·°ì—ì„œ ì•¡ì…˜ì„ í˜¸ì¶œí•˜ëŠ” Flux êµ¬ì¡°](../source/images/Flux_view_calling_action.png)
- ë¦¬ì•¡íŠ¸ ì½”ë“œ ì˜ˆì œ
    ```tsx
    type StoreState = {
        count: number
    }

    <!-- "type Action"ìœ¼ë¡œ ì–´ë–¤ ì¢…ë¥˜ê°€ ìˆê³ , ì–´ë–¤ ë°ì´í„°ë¥¼ í•„ìš”ë¡œí•˜ëŠ”ì§€ ì •ì˜ -->

    type Action = { type: 'add'; payload: number }

    <!-- ìŠ¤í† ì–´ ì—­í• : useReducer, reducer/ í˜„ì¬ ìƒíƒœì— ë”°ë¥¸ ê°’ ë³€ê²½ ì •ì˜ -->
    function reducer(prevState: StoreState, action: Action) {
        const { type: ActionType } = action
        if (ActionType === 'add') {
            return {
                count: prevState.count + action.payload,
            }
        }

        throw new Error(`Unexpected Action [${ActionType}]`)
    }

    <!-- ë·°ì¸ Appì—ì„œ ë³´ì—¬ì¤Œ -->
    export default function App() {
        const [state, dispatcher] = useReducer(reducer, {count:0})

        function handleClick() {
            dispatcher({ type: 'add', payload: 1 })
        }

        return (
            <div>
                <h1>{state.count}</h1>
                <button onClick={handleClick}>+</button>
            </div>
        )
    }
    ```
    
- ë‹¨ë°©í–¥ ë°ì´í„° íë¦„ ë°©ì‹ì˜ ì¥/ë‹¨ì 
    - ì¥ì : ë°ì´í„° íë¦„ì€ ëª¨ë‘ ì•¡ì…˜ì´ë¼ëŠ” í•œ ë°©í–¥ìœ¼ë¡œ ì¤„ì–´ë“¤ì–´ ë°ì´í„° íë¦„ ì¶”ì ê³¼ ì½”ë“œ ì´í•´ê°€ ìˆ˜ì›”í•´ì§
    - ë‹¨ì : ì‚¬ìš©ìì˜ ì…ë ¥ì— ë”°ë¼ ë°ì´í„°ë¥¼ ê°±ì‹ í•˜ê³  í™”ë©´ì„ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸í•´ì•¼ í•˜ëŠ”ì§€ ì½”ë“œë¡œ ëª¨ë‘ ì‘ì„±(ì½”ë“œì˜ ì–‘ ğŸ”º)

- Flux íŒ¨í„´ì„ ë”°ë¥´ëŠ” ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë“±ì¥
    - [Flux](https://github.com/facebookarchive/flux)
    - [alt](https://github.com/goatslacker/alt)
    - [RefluxJS](https://github.com/reflux/refluxjs)
    - [Nuclear JS](https://github.com/optimizely/nuclear-js)
    - [Fluxible](https://github.com/yahoo/fluxible)
    - [Fluxxor](https://github.com/BinaryMuse/fluxxor)

> ì‹œì¥ ì§€ë°°ì ë¦¬ë•ìŠ¤ì˜ ë“±ì¥
- ìµœì´ˆì—ëŠ” Flux êµ¬ì¡°ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬
- `Elm` ì•„í‚¤í…ì³ë¥¼ ë„ì…

- `Elm`ì´ë€?
    - ì›¹í˜ì´ì§€ë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ì‘ì„±í•˜ê¸° ìœ„í•œ ì–¸ì–´
    - ì˜ˆì œ
        ```elm
        module Main exposing (..)

        imoprt Browser
        import Html exposing (Html, button, div, text)
        import Html.Events exposing (onClick)
        
        -- MAIN
        main = Browser.sandbox { init = init, update = update, view = view }

        -- MODEL
        type alias Model = Int
        
        init : Model
        init = 0

        -- UPDATE
        type Msg = Increment | Decrement

        update : Msg -> Model -> Model
        update msg model = 
            case msg of
                Increment ->
                    model + 1
                
                Decrement -> 
                    model - 1
        
        -- VIEW

        view : Model -> Html Msg
        view model = 
        div []
            [ button [ onClick Decrement ] [ text "-" ]
            , div[] [ text (String.fromInt model) ]
            , button [ onClick Increment ] [ text "+" ]
            ]
        <div>
            <button>-</button>
            <div>2</div>
            <button>+</button>
        </div>
        ```
    - í•µì‹¬
        - ëª¨ë¸(model): ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ ì˜ë¯¸(Model, ì´ˆê¹ƒê°’ : 0)
        - ë·°(view): ëª¨ë¸ì„ í‘œí˜„í•˜ëŠ” HTML(Modelì„ ì¸ìˆ˜ë¡œ ë°›ì•„ì„œ HTMLì„ í‘œí˜„)
        - ì—…ë°ì´íŠ¸(update): ëª¨ë¸ì„ ìˆ˜ì •í•˜ëŠ” ë°©ì‹(`Increment`, `Decrement`ë¥¼ ì„ ì–¸í•´ ê°ê°ì˜ ë°©ì‹ì´ ì–´ë–»ê²Œ ëª¨ë¸ì„ ìˆ˜ì •í•˜ëŠ”ì§€ ë‚˜íƒ€ëƒ„)

- í•˜ë‚˜ì˜ ìƒíƒœ ê°ì²´ë¥¼ ìŠ¤í† ì–´ì— ì €ì¥, ì´ ê°ì²´ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ì‘ì—…ì„ ë””ìŠ¤íŒ¨ì¹˜í•´ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰(**`reducer` í•¨ìˆ˜ë¡œ ë°œìƒ, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœì— ëŒ€í•œ ì™„ì „íˆ ìƒˆë¡œìš´ ë³µì‚¬ë³¸ì„ ë°˜í™˜í•œ ë‹¤ìŒ, ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì´ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì§„ ìƒíƒœë¥¼ ì „íŒŒ**)
- í•˜ë‚˜ì˜ ê¸€ë¡œë²Œ ìƒíƒœ ê°ì²´ë¥¼ í†µí•´ ì´ ìƒíƒœë¥¼ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ì „íŒŒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— propsë¥¼ ê¹Šì´ ì „íŒŒí•´ì•¼ í•˜ëŠ” ì´ë¥¸ë°” prop ë‚´ë ¤ì£¼ê¸° ë¬¸ì œ í•´ê²°
- ìŠ¤í† ì–´ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë¼ë©´ ë‹¨ì§€ `connect`ë¥¼ í†µí•´ ìŠ¤í† ì–´ ì ‘ê·¼ ê°€ëŠ¥

- ë¦¬ë•ìŠ¤ì˜ ë‹¨ì 
    - ë‹¨ìˆœíˆ í•˜ë‚˜ì˜ ìƒíƒœë¥¼ ë°”ê¾¸ê³  ì‹¶ì–´ë„ í•´ì•¼ í•  ì¼ì´ ë„ˆë¬´ ë§ìŒ
    - ì•¡ì…˜ íƒ€ì… ì„ ì–¸, ì•¡ì…˜ ìˆ˜í–‰ creator í•¨ìˆ˜ ì‘ì„±, dispatcherì™€ selector ìƒì„±, ìƒˆë¡œìš´ ìƒíƒœê°€ ì–´ë–»ê²Œ ê¸°ì¡´ ë¦¬ë“€ì„œ ë‚´ë¶€ì—ì„œ ì–´ë–¤ì‹ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í• ì§€ ë“± í•˜ëŠ” ì¼ì— ë¹„í•´ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ê°€ ë„ˆë¬´ ë§ìŒ

> Context APIì™€ useContext
- ë°°ê²½
    - ìƒíƒœë¥¼ ì–´ë–»ê²Œ ì ì ˆí•˜ê²Œ ì£¼ì…í•´ì•¼í•˜ëŠ”ê°€?
    - ìì‹ ì»´í¬ë„ŒíŠ¸ì—ê²Œ prop ë‚´ë ¤ì£¼ê¸°ë¥¼ í†µí•¨: í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ê¹Œì§€ ê³„ì† ë‚´ë ¤ì¤˜ì•¼í•¨(propsì˜ ì»´í¬ë„ŒíŠ¸ ê´€í†µ)
    - ë¦¬ë•ìŠ¤ì˜ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ë˜í•œ ë¶€ë‹´ìŠ¤ëŸ¬ì›€
- 16.3 Context API ì¶œì‹œ ì´ì „
    ```tsx
    class MyComponent extends React.Component {
        static childContextType = {
            name: PropType.string,
            age: PropType.number,
        }

        getChildContext() {
            return {
                name: 'foo',
                age: 30,
            }
        }

        render() {
            return <ChildComponent />
        }
    }

    function ChildComponent(props, context) {
        return (
            <div>
                <p>Name: {context.name}</p>
                <p>Age: {context.age}</p>
            </div>
        )
    }

    ChildComponent,contextType = {
        name: PropTypes.string,
        age: PropTypes.number,
    }
    ```
    - ë¬¸ì œì  1: ìƒìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ë©´ `getChildContext`ë„ ê°™ì´ í˜¸ì¶œë¨ê³¼ ë™ì‹œì— `shouldComponentUpdate`ê°€ í•­ìƒ `true`ë¥¼ ë°˜í™˜í•´ ë¶ˆí•„ìš”í•˜ê²Œ ë Œë”ë§ì´ ì¼ì–´ë‚¨
    - ë¬¸ì œì  2: `getChildContext`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  `context`ë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ì•¼í•˜ëŠ”ë°, ì´ ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ì™€ ê²°í•©ë„ê°€ ë†’ì•„ì§

- 16.3 ë¦¬ì•¡íŠ¸ íŒ€ì˜ Context API
    - ì „ì—­ ìƒíƒœë¥¼ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ì£¼ì…í•  ìˆ˜ ìˆìŒ
    - ì›í•˜ëŠ” ê³³ì—ì„œ Context Providerê°€ ì£¼ì…í•˜ëŠ” ìƒíƒœ
    ```tsx
    type Counter = {
        count: number
    }

    const CounterContext = createContext<Counter | undefined>(undefined)

    class CounterComponent extends Component {
        render() {
            return (
                <CounterContext.Consumer>
                    {(state) => <p>{state?.count}</p>}
                </CounterContext.Consumer>
            )
        }
    }

    class DummyParent extends Component {
        render() {
            return (
                <>
                    <CounterComponent />
                </>
            )
        }
    }

    export default class MyApp extends Component<{}, Counter> {
        state = { count: 0 }

        componentDidMount() {
            this.setState({ count: 1 })
        }

        handleClick = () => {
            this.setState((state) => ({ count: state.count + 1 }))
        }

        render() {
            return (
                <CounterContext.Provider value={this.state}>
                    <button onClick={this.handleClick}>+</button>
                    <DummyParent />
                </CounterContext.Provider>
            )
        }
    }
    ```

> í›…ì˜ íƒ„ìƒ, ê·¸ë¦¬ê³  React Queryì™€ SWR
- `16.8` í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ í›… APIì˜ ë“±ì¥
- ê°€ì¥ í° ë³€ê²½ì : stateë¥¼ ë§¤ìš° ì†ì‰½ê²Œ ì¬ì‚¬ìš© ê°€ëŠ¥
    - **í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë³´ë‹¤ í›¨ì”¬ ê°„ê²°í•˜ê³  ì§ê´€ì **
    ```tsx
    function useCounter(){
        const [count, setCount] = useState(0)

        function increase() {
            setCount((prev) => prev+1)
        }

        return {count, increase}
    }
    ```
- [React Queryì™€ SWR](https://yoonhaemin.com/tag/technical-thinking/react-query-vs-swr/)
    - ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” `fetch`ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° íŠ¹í™”
    - API í˜¸ì¶œì— ëŒ€í•œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì— HTTP ìš”ì²­ì— íŠ¹í™”ëœ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
    - [ì°¨ì´ ë¹„êµ](https://tech.madup.com/react-query-vs-swr/)
    - ì˜ˆì‹œ ì½”ë“œ(SWR)
        ```tsx
        import React from 'react'
        import useSWR from 'swr'

        const fetcher = (url) => fetcher(url).then((res) => res.json())

        export default function App() {
            const {data, error} = useSWR(
                'https://api.github.com/repo/vercel/swr',
                fetcher,
            )

            if (error) return 'An error has occured.'
            if (!data) return 'Loading'

            return (
                <div>
                    <p>{JSON.stringify(data)}</p>
                </div>
            )
        }
        ```
    - ì˜ˆì‹œ ì½”ë“œ(React Query)
        ```tsx
        import { QueryClient, QueryClientProvider, useQuery } from "react-query";

        const queryClient = new QueryClient();
        const url = "https://61b88c9d64e4a10017d19053.mockapi.io/user";

        const App = () => (
        <div>  
            <!-- providerë¡œ ê°ì‹¸ì§€ ì•Šìœ¼ë©´ ì—ëŸ¬ ë°œìƒ -->
            <QueryClientProvider client={queryClient}>
            <ReactQueryProfile />
            </QueryClientProvider>
        </div>
        );

        const ReactQueryProfile = () => {
        const {isLoading, error, data, isFetching} = useQuery("users", () =>
            fetch("https://61b88c9d64e4a10017d19053.mockapi.io/user").then(res => res.json())
        );

        if (error) return <div>failed to load</div>;
        if (isLoading) return <div>loading...</div>;

        return <Profile library="React Query" data={data} />;
        }

        const Profile = ({library, data}) => (
        <div>
            <h1>Users from {library}</h1>
            {data.map(user => <p>{user.level} developer <strong>{user.name}</strong></p>)}
        </div>
        )

        export default App;
        ```

> Recoil, Zustand, Jotai, Valtioì— ì´ë¥´ê¸°ê¹Œì§€
- ë²”ìš©ì ì¸ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
```tsx
// Recoil
const counter = atom({ key: 'count', default: 0 })
const todoList = useRecoilValue(counter)

// Jotai
const countAtom = atom(0)
const [count, setCount] = useAtom(countAtom)

// Zustand
const useCounterStore = create((set) => ({
    count: 0,
    increase: () => set((state) => ({ count: state.count + 1 }))
}))
const count = useCounterStore((state) => state.count)

// Valtio
const state = proxy({ count: 0 })
const snap = useSnapshot(state)
state.count ++
``` 

- ë¦¬ë•ìŠ¤ì™€ì˜ ì°¨ì´ì 
    - í›…ì„ í™œìš©í•´ ì‘ì€ í¬ê¸°ì˜ ìƒíƒœë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬
    - peerDependenciesë¡œ ë¦¬ì•¡íŠ¸ 16.8ë²„ì „ ì´ìƒì„ ìš”êµ¬
    - ë¦¬ë•ìŠ¤ë‚˜ MobXë„ `react-redux`, `mobx-react-lite` ë“±ì„ ì„¤ì¹˜í•´ í›…ìœ¼ë¡œ ìƒíƒœë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì§€ë§Œ ìœ„ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë³„ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šì•„ë„ ë¨

## ì •ë¦¬

### ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ ìƒíƒœ(State)
- ì–´ë– í•œ ì˜ë¯¸ë¥¼ ì§€ë‹Œ ê°’ì´ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ì§€ì†ì ìœ¼ë¡œ ë³€ê²½ë  ìˆ˜ ìˆëŠ” ê°’
- ìƒí˜¸ì‘ìš©ì´ ê°€ëŠ¥í•œ ëª¨ë“  ìš”ì†Œì˜ í˜„ì¬ ê°’
> ìƒíƒœ ê°’ ë¶„ë¥˜
- UI: ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ, ë¼ë””ì˜¤ë¥¼ ë¹„ë¡¯í•œ ê°ì¢… input, ì•Œë¦¼ì°½ì˜ ë…¸ì¶œ ì—¬ë¶€ ë“±
- URL: ë¸Œë¼ìš°ì €ì—ì„œ ê´€ë¦¬ë˜ê³  ìˆëŠ” ìƒíƒœ ê°’, `https://www.airbnb.co.kr/rooms/34113796?adults=2` ì—ì„œ `roomId=34113796`ê³¼ `adults=2`ë¼ê³ í•˜ëŠ” ìƒíƒœê°€ ì¡´ì¬, ì´ëŠ” ì‚¬ìš©ìì˜ ë¼ìš°íŒ…ì— ë”°ë¼ ë³€ê²½
- í¼(form): ë¡œë”© ì¤‘, ì œì¶œ, ì ‘ê·¼ ë¶ˆê°€ëŠ¥, ê°’ì˜ ìœ íš¨ ë“±
- ì„œë²„ì—ì„œ ê°€ì ¸ì˜¨ ê°’: í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ì„ í†µí•´ ê°€ì ¸ì˜¨ ê°’(API ìš”ì²­ ë“±)

### ë¦¬ì•¡íŠ¸ ìƒíƒœ ê´€ë¦¬ ì—­ì‚¬
> ì´ˆê¸°
- MVC íŒ¨í„´ì„ ì‚¬ìš©( ì–‘ë°©í–¥ ë°”ì¸ë”© )
- ë°ì´í„° íë¦„ íŒŒì•…ì´ ì–´ë ¤ì›Œ ë‹¨ë°©í–¥ ë°”ì¸ë”© ì±„ìš©(**Flux íŒ¨í„´ ë“±ì¥**)
- propsë¥¼ ë‚´ë ¤ì£¼ê¸° ìœ„í•´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ì›í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê¹Œì§€ ë‚´ë ¤ì£¼ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ê´€í†µí•˜ëŠ” ë¬¸ì œê°€ ìƒê¹€

> Redux íƒ„ìƒ
- ë‹¨ë°©í–¥ ë°”ì¸ë”© Flux íŒ¨í„´ì„ ê¸°ì¤€ìœ¼ë¡œ `action`, `reducer`, `store`, `view`ê°œë…ì„ í†µí•´ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê³ , `connect`í•¨ìˆ˜ë¥¼ í†µí•´ ì›í•˜ëŠ” ê³³ì—ì„œ ìƒíƒœë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ
- ë‹¨ì : ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ê°€ ë„ˆë¬´ ë§ìŒ(ì½”ë“œ ë‹¨ê³„ì—ì„œ)

> Context API ë“±ì¥
- propsë¡œ ë‚´ë ¤ì£¼ìë‹ˆ ë„ˆë¬´ ë§ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ê´€í†µí•´ì•¼í•¨
- ë¦¬ë•ìŠ¤ë¥¼ ì‚¬ìš©í•˜ìë‹ˆ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ê°€ ë¶€ë‹´ìŠ¤ëŸ¬ì›€
- contextë¥¼ í†µí•´ ê´€ë¦¬ í•˜ìë‹ˆ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì´ ì‹¬í•¨
    ```tsx
    class MyComponent extends React.Component {
        static childContextType = {
            name: PropType.string,
            age: PropType.number,
        }
        // Contextê´€ë¦¬ í•¨ìˆ˜
        getChildContext() {
            return {
                name: 'foo',
                age: 30,
            }
        }

        render() {
            return <ChildComponent />
        }
    }

    function ChildComponent(props, context) {
        return (
            <div>
                <p>Name: {context.name}</p>
                <p>Age: {context.age}</p>
            </div>
        )
    }

    ChildComponent,contextType = {
        name: PropTypes.string,
        age: PropTypes.number,
    }
    ```
    - ë¬¸ì œì  1: ìƒìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ë©´ `getChildContext`ë„ ê°™ì´ í˜¸ì¶œë¨ê³¼ ë™ì‹œì— `shouldComponentUpdate`ê°€ í•­ìƒ `true`ë¥¼ ë°˜í™˜í•´ ë¶ˆí•„ìš”í•˜ê²Œ ë Œë”ë§ì´ ì¼ì–´ë‚¨
    - ë¬¸ì œì  2: `getChildContext`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  `context`ë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ì•¼í•˜ëŠ”ë°, ì´ ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ì™€ ê²°í•©ë„ê°€ ë†’ì•„ì§

- `16.8`ë²„ì „ Context API ë“±ì¥
    - ì¥ì : ì „ì—­ ìƒíƒœë¥¼ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ì£¼ì…í•  ìˆ˜ ìˆìŒ(ì›í•˜ëŠ” ê³³ì—ì„œ Context Providerê°€ ì£¼ì…í•˜ëŠ” ìƒíƒœ)
    - ë¶ˆí•„ìš”í•œ ë Œë”ë§ ë¬¸ì œ í•´ê²°
    ```tsx
    type Counter = {
        count: number
    }

    const CounterContext = createContext<Counter | undefined>(undefined)

    class CounterComponent extends Component {
        render() {
            return (
                <CounterContext.Consumer>
                    {(state) => <p>{state?.count}</p>}
                </CounterContext.Consumer>
            )
        }
    }

    class DummyParent extends Component {
        render() {
            return (
                <>
                    <CounterComponent />
                </>
            )
        }
    }

    export default class MyApp extends Component<{}, Counter> {
        state = { count: 0 }

        componentDidMount() {
            this.setState({ count: 1 })
        }

        handleClick = () => {
            this.setState((state) => ({ count: state.count + 1 }))
        }

        render() {
            return (
                <CounterContext.Provider value={this.state}>
                    <button onClick={this.handleClick}>+</button>
                    <DummyParent />
                </CounterContext.Provider>
            )
        }
    }
    ```

> í›…ì˜ íƒ„ìƒê³¼ React Query / SWR
- `16.8` í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ í›… APIì˜ ë“±ì¥
- ê°€ì¥ í° ë³€ê²½ì : stateë¥¼ ë§¤ìš° ì†ì‰½ê²Œ ì¬ì‚¬ìš© ê°€ëŠ¥(**í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë³´ë‹¤ í›¨ì”¬ ê°„ê²°í•˜ê³  ì§ê´€ì **)
    ```tsx
    function useCounter(){
        const [count, setCount] = useState(0)

        function increase() {
            setCount((prev) => prev+1)
        }

        return {count, increase}
    }
    ```
- [React Queryì™€ SWR](https://yoonhaemin.com/tag/technical-thinking/react-query-vs-swr/)
    - ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” `fetch`ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° íŠ¹í™”
    - API í˜¸ì¶œì— ëŒ€í•œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì— HTTP ìš”ì²­ì— íŠ¹í™”ëœ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
    - [ì°¨ì´ ë¹„êµ](https://tech.madup.com/react-query-vs-swr/)
    - ì˜ˆì‹œ ì½”ë“œ(SWR)
        ```tsx
        import React from 'react'
        import useSWR from 'swr'

        const fetcher = (url) => fetcher(url).then((res) => res.json())

        export default function App() {
            const {data, error} = useSWR(
                'https://api.github.com/repo/vercel/swr',
                fetcher,
            )

            if (error) return 'An error has occured.'
            if (!data) return 'Loading'

            return (
                <div>
                    <p>{JSON.stringify(data)}</p>
                </div>
            )
        }
        ```
    - ì˜ˆì‹œ ì½”ë“œ(React Query)
    ```tsx
    import { QueryClient, QueryClientProvider, useQuery } from "react-query";

    const queryClient = new QueryClient();
    const url = "https://61b88c9d64e4a10017d19053.mockapi.io/user";

    const App = () => (
    <div>
        <!-- providerë¡œ ê°ì‹¸ì§€ ì•Šìœ¼ë©´ ì—ëŸ¬ ë°œìƒ -->
        <QueryClientProvider client={queryClient}>
        <ReactQueryProfile />
        </QueryClientProvider>
    </div>
    );

    const ReactQueryProfile = () => {
    const {isLoading, error, data, isFetching} = useQuery("users", () =>
        fetch("https://61b88c9d64e4a10017d19053.mockapi.io/user").then(res => res.json())
    );

    if (error) return <div>failed to load</div>;
    if (isLoading) return <div>loading...</div>;

    return <Profile library="React Query" data={data} />;
    }

    const Profile = ({library, data}) => (
    <div>
        <h1>Users from {library}</h1>
        {data.map(user => <p>{user.level} developer <strong>{user.name}</strong></p>)}
    </div>
    )

    export default App;
    ```

> ì´í›„ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬(Recoil, Zustand, Jotai, Valtio)
- ë²”ìš©ì ì¸ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
```tsx
// Recoil
const counter = atom({ key: 'count', default: 0 })
const todoList = useRecoilValue(counter)

// Jotai
const countAtom = atom(0)
const [count, setCount] = useAtom(countAtom)

// Zustand
const useCounterStore = create((set) => ({
    count: 0,
    increase: () => set((state) => ({ count: state.count + 1 }))
}))
const count = useCounterStore((state) => state.count)

// Valtio
const state = proxy({ count: 0 })
const snap = useSnapshot(state)
state.count ++
``` 

- ë¦¬ë•ìŠ¤ì™€ì˜ ì°¨ì´ì 
    - í›…ì„ í™œìš©í•´ ì‘ì€ í¬ê¸°ì˜ ìƒíƒœë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬
    - peerDependenciesë¡œ ë¦¬ì•¡íŠ¸ `16.8`ë²„ì „ ì´ìƒì„ ìš”êµ¬
    - ë¦¬ë•ìŠ¤ë‚˜ MobXë„ `react-redux`, `mobx-react-lite` ë“±ì„ ì„¤ì¹˜í•´ í›…ìœ¼ë¡œ ìƒíƒœë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì§€ë§Œ ìœ„ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë³„ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šì•„ë„ ë¨